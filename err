import lgpio
import time

# Open the GPIO chip (Pi 5 uses chip 0 or 4, usually 0 for main header)
h = lgpio.gpiochip_open(0)

SERVO_PIN = 18

print("Testing Raw PWM on GPIO 18...")

try:
    while True:
        # 50 Hz frequency (standard for servos)
        # 5% duty cycle is roughly -90 degrees
        print("Angle A")
        lgpio.tx_pwm(h, SERVO_PIN, 50, 5) 
        time.sleep(1)

        # 10% duty cycle is roughly +90 degrees
        print("Angle B")
        lgpio.tx_pwm(h, SERVO_PIN, 50, 10) 
        time.sleep(1)

except KeyboardInterrupt:
    lgpio.tx_pwm(h, SERVO_PIN, 50, 0) # Turn off
    lgpio.gpiochip_close(h)
    print("Done")
